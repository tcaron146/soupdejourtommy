(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{2016:function(e,t,a){Promise.resolve().then(a.bind(a,8892))},8892:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var r=a(7437),n=a(2265),u=a(3105),s=a(4086),i=a(9584),l=a(4418);function o(){let{user:e}=(0,l._)()||{},[t,a]=(0,n.useState)(""),[o,c]=(0,n.useState)(null),d="0pAMwWMZhIZ21qGsQLqNYFrveLd2";if(!e||e.uid!==d)return(0,r.jsx)("p",{className:"pt-32 text-center",children:"Unauthorized"});let m=async()=>{let r="";if(o){let e=(0,i.iH)(u.t,"posts/".concat(d,"/").concat(o.name));await (0,i.KV)(e,o),r=await (0,i.Jt)(e)}await (0,s.ET)((0,s.hJ)(u.db,"posts"),{userId:e.uid,username:e.username,avatarUrl:e.avatarUrl,text:t,imageUrl:r,createdAt:(0,s.Bt)()}),a(""),c(null),alert("Posted!")};return(0,r.jsxs)("div",{className:"pt-32 px-6 max-w-2xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Create Post"}),(0,r.jsx)("textarea",{className:"w-full bg-neutral-900 p-3 rounded mb-3",placeholder:"Write something...",value:t,onChange:e=>a(e.target.value)}),(0,r.jsx)("input",{type:"file",onChange:e=>c(e.target.files[0]),className:"mb-4"}),(0,r.jsx)("button",{onClick:m,className:"px-6 py-2 bg-primary text-background rounded",children:"Post"})]})}},4418:function(e,t,a){"use strict";a.d(t,{H:function(){return o},_:function(){return c}});var r=a(7437),n=a(2265),u=a(3105),s=a(3085),i=a(4086);let l=(0,n.createContext)(),o=e=>{let{children:t}=e,[a,o]=(0,n.useState)(null),c=async(e,t,a,r)=>{let n=await (0,s.Xb)(u.I,e,t);return await (0,s.ck)(n.user,{displayName:a}),await (0,i.pl)((0,i.JU)(u.db,"users",n.user.uid),{username:a,birthday:r,avatarUrl:"",bio:"",createdAt:Date.now()}),n.user},d=async()=>{let e=new s.hJ,t=await (0,s.rh)(u.I,e);await (0,i.pl)((0,i.JU)(u.db,"users",t.user.uid),{username:t.user.displayName,avatarUrl:t.user.photoURL,bio:"",birthday:""},{merge:!0})};return(0,n.useEffect)(()=>{let e=u.I.onAuthStateChanged(e=>{if(!e){o(null);return}let t=(0,i.JU)(u.db,"users",e.uid),a=(0,i.cf)(t,t=>{let a=t.data()||{};o({uid:e.uid,email:e.email,username:a.username||e.displayName||"User",avatarUrl:a.avatarUrl||"",bio:a.bio||"",birthday:a.birthday||""})});return()=>a()});return()=>e()},[]),(0,r.jsx)(l.Provider,{value:{user:a,emailSignIn:(e,t)=>(0,s.e5)(u.I,e,t),emailSignUp:c,googleSignIn:d,logOut:()=>(0,s.w7)(u.I)},children:t})},c=()=>(0,n.useContext)(l)},3105:function(e,t,a){"use strict";a.d(t,{I:function(){return l},db:function(){return o},t:function(){return c}});var r=a(994),n=a(3085),u=a(4086),s=a(9584);let i=(0,r.ZF)({apiKey:"AIzaSyAF8-fQl5ForsCDmsmcZJ7NIvfP0BxOIZE",authDomain:"soupdejourtommy-ba24e.firebaseapp.com",projectId:"soupdejourtommy-ba24e",storageBucket:"soupdejourtommy-ba24e.appspot.com",messagingSenderId:"880724282692",appId:"1:880724282692:web:71e1cc9f07dc8f90b21b11",measurementId:"G-YSN6SG0RZV"}),l=(0,n.v0)(i),o=(0,u.ad)(i),c=(0,s.cF)(i)}},function(e){e.O(0,[358,220,271,971,938,744],function(){return e(e.s=2016)}),_N_E=e.O()}]);